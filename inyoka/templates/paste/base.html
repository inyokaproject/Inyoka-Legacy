{% extends 'base.html' %}
{% set title_trace = title_trace|default([]) + [_('Paste')] %}

{% block content %}
<h1>{% block paste_header %}Pastebin{% endblock %}</h1>
<ul class="pagetabs">
    {% if tab is undefined %}
        {% set tab = 'new' %}
    {% endif %}
    <li{% if tab == 'new' %} class="selected"{% endif %}>
        <a href="{{ href('paste/index') }}">New</a></li>
    <li{% if tab == 'browse' %} class="selected"{% endif %}>
        <a href="{{ href('paste/browse', sort='active') }}">Browse</a></li>
    {% block pagetabs %}
    {% endblock %}
</ul>
{% block paste_content %}
{% endblock %}
{% endblock %}

{%- block sidebar %}
{% if recent_pastes %}
  <table>
    <thead>
      <tr>
        <th>Recent Pastes</th>
      </tr>
    </thead>
    <tbody>
    {% for p in recent_pastes %}
    {# TODO: ACL for hidden pastes and edit link! #}
    <tr{% if p.hidden %} class="hidden"{% endif %}>
      <td><a href="{{ href(p) }}">{{ p }}</a> <span class="small">by {{ p.author|e }} ({{ p.pub_date|datetimeformat('short') }})</span></td>
    </tr>
    {% endfor %}
    </tbody>
  </table>
{% endif %}
{%- endblock %}
