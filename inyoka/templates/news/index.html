{%- extends 'news/base.html' %}

{% block news_content %}
  {%- if articles %}
  <ul class="articles">
    {%- for article in articles %}
    <li class="article{{ article.hidden and ' hidden' or '' }}">
      <h3 class="title"><a href="{{ href(article) }}">{{ article.title|e }}</a></h3>
      <div class="text">{{ article.rendered_intro }}</div>
      <p class="meta">
        {% trans author_url=href('portal/profile', username=article.author.username), author_name=article.author.username|e,
                 article_published=article.pub_date|datetimeformat %}
        written by <a href="{{ author_url }}">{{ author_name }}</a>
        {{ article_published }}
        {% endtrans %}
        {%- if article.updated > article.pub_date %}
        ({{ _('updated on') }} {{ article.updated|datetimeformat }})
        {%- endif %}
        {# TODO: support multiple categories #}
        {{ _('Categories: ')  }}<a href="{{ href(article.category) }}">{{ article.category.name|e }}</a>
        {# TODO: ACL check #}
        | <a href="{{ href(article, action='edit') }}" class="adminlink">{{ _('Edit') }}</a>
      </p>
    </li>
    {%- endfor %}
  </ul>
  {%- else %}
  <p>{{ _('Keine Artikel vorhanden.') }}</p>
  {%- endif %}

  {{ pagination }}
{% endblock %}
